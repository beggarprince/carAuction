<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>Home Page</title>
</head>
<body>
<h1>Home Page</h1>
<div class="headerBar">

    <button>button</button>

    <button>button2</button>
<div style="width: 200px">
    <img src="/images/noImg.png">
</div>
    <a id="tempReg" href="/register.html">
        Register button
    </a>
    <a id="tempLogin" href="/login.html">
        Login
    </a>
    <a id="tempRegCar" href="/uploadCar.html">
        Upload Car Listing
    </a>

</div>

<div id="text"></div>
<img id="image" alt="Dynamic Image" margin="25px"/><br>

<div id="tempMessage">This is also temporarily working as the dashboard type ls</div>

<script>
    fetch('/home-data')
        .then(response => response.json())
        .then(data => {
            // Show the strings
            const textDiv = document.getElementById('text');
            textDiv.innerText = data.strings.join(' ');

            // Set the image
            const image = document.getElementById('image');
            image.src = data.imgUrl;
        });
</script>

<div id="welcome">WELCOME TO THE CIRCUS OF VALUE</div>

<script>
    ( async  () => {
        const token = localStorage.getItem("jwt")

        if(!token) return;

        try{
            let token = localStorage.getItem("jwt") ?? "";
            token = token.replace("Bearer", "");
            //console.log("My jwt token is " + token)
            const res = await fetch("/api/users/me",
                {
                    headers: {Authorization: `Bearer ${token}`}
                });

            if(!res.ok) throw new Error(("Unauthorized"))

            console.log(res);

            const resJson = await res.json();
            console.log(resJson);

            const {name} = resJson;
            const {username} = resJson;
            const {id} = resJson;

            localStorage.setItem("name", name);
            localStorage.setItem("username", username);
            localStorage.setItem("id", id);

            document.getElementById("welcome").textContent =
                `Welcome to the Circus of Value, ${name}, username being ${username}\nId:${id}`;
        } catch(err){
            console.error(err);
        }
    })();
</script>

<section class="cellColumnContainer">

    <!-- this is the base -->
    <div class="card">
        <h3>Accord</h3>
        <img class="l2" src="/images/tempCars/accord2.jpg">
        <div class="lTextBg">
            <p class="lPrice ">$300</p>
            <div class="cellDescription">
                This brand new vehicle is one of of a kind type shit because it's a recall of a recall. I don't really
                know what else to say i'm testing if it cuts off correctly and i need a large amount of text that cant
                be displayed type shi
            </div>
        </div>
    </div>

    <!-- this is where the base ends -->
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/noImg.png">
        <div class="lTextBg">
            <p class="lPrice">$6099</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/altima1.jpg">
        <div class="lTextBg">
            <p class="lPrice">$11800</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/temp.png">
        <div class="lTextBg">
            <p class="lPrice">$13499</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/temp.png">
        <div class="lTextBg">
            <p class="lPrice">$7499</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/noImg.png">
        <div class="lTextBg">
            <p class="lPrice">$4500</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/bigrig.jpg">
        <div class="lTextBg">
            <p class="lPrice">$14999</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/yomamma.jpg">
        <div class="lTextBg">
            <p class="lPrice">$3499</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/chevy.jpg">
        <div class="lTextBg">
            <p class="lPrice">$9800</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/fsomething.jpg">
        <div class="lTextBg">
            <p class="lPrice">$10299</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/temp.png">
        <div class="lTextBg">
            <p class="lPrice">$1299</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/altima2.jpg">
        <div class="lTextBg">
            <p class="lPrice">$4800</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/altima5.jpg">
        <div class="lTextBg">
            <p class="lPrice">$5999</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/altima3.jpg">
        <div class="lTextBg">
            <p class="lPrice">$13099</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/altima4.jpg">
        <div class="lTextBg">
            <p class="lPrice">$2999</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/altima1.jpg">
        <div class="lTextBg">
            <p class="lPrice">$11100</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/noImg.png">
        <div class="lTextBg">
            <p class="lPrice">$8000</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/noImg.png">
        <div class="lTextBg">
            <p class="lPrice">$3999</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/accord1.jpg">
        <div class="lTextBg">
            <p class="lPrice">$12799</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/accord2.jpg">
        <div class="lTextBg">
            <p class="lPrice">$7299</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/tempCars/accord3.jpg">
        <div class="lTextBg">
            <p class="lPrice">$14099</p>
            <p>Paragraph</p>
        </div>
    </div>
    <div class="card">
        <h3>Title</h3>
        <img class="l2" src="/images/noImg.png">
        <div class="lTextBg">
            <p class="lPrice">$4999</p>
            <p>Paragraph</p>
        </div>
    </div>

</section>


<p> Copyright type shit</p>
</body>
</html>
